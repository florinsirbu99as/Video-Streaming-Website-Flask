from flask import Flask, render_template, Response, url_for
import cv2

app = Flask(__name__)

def generate_frames():
    cap = cv2.VideoCapture(0)  # Change this to your screen capture device index

    while True:
        success, frame = cap.read()
        if not success:
            break
        else:
            _, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

    cap.release()

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/streaming')
def streaming():
    temperature_data = [20.15617665,20.0756674,20.79595559,20.9484638,20.08192338,20.39002795
    ,20.5713769,21.06862243,20.58899563,20.66314514,20.88180905,21.21971926
    ,20.84681574,20.94228777,21.21747725,21.73799965,21.35613152,20.91079016
    ,21.17203733,21.77022707,20.68148795,20.63966703,21.19711679,21.91517139
    ,21.07795912,20.32822725,20.58222552,21.05790638,20.48659146,20.39365611
    ,20.56443068,21.46148911,20.03302452,20.51813559,20.95690717,21.08628906
    ,20.23210362,20.54443252,20.94954068,20.98497232,20.51655473,20.59137505
    ,21.01772359,20.92731894,20.95888674,20.67964672,21.12548976,21.04758715
    ,20.64941961,20.85109566,21.10270506,21.45129562,20.77906874,21.00003733
    ,20.65932005,21.35886786,20.48546981,20.47231,20.23779733,20.94279685
    ,20.36235612,20.5770248,21.41976146,21.31363753,20.12965096,20.21222551
    ,21.16596638,20.62768872,20.47021572,20.34082729,20.88180905,21.80734637
    ,21.31134483,20.99030703,20.98668853,21.1635733,20.39577106,20.28764433
    ,20.96944521,21.98359775,20.97189049,20.27391625,20.42748023,20.67990378
    ,20.57925871,20.20365227,20.72606248,21.12231088,20.07335415,19.95548084
    ,20.70411546,20.78566955,20.65514829,20.62736041,20.483068,21.56520867
    ,20.28192094,20.84099161,21.29244526,21.20764827,20.36602671,20.26274865
    ,21.60671197,20.86049575,20.99618045,20.93071373,21.30957788,21.07612542
    ,20.68629274,20.42038431,21.28140712,21.87791295,21.05938364,20.7827468
    ,20.94378671,20.58963895,20.67435692,20.73321433,21.04652558,20.80176989
    ,20.83443568,20.55345864,20.8261104,20.43683132,20.7728143,20.77585538
    ,20.95307923,21.42591672,20.42958171,20.60846287,21.14631592,21.42248255
    ,20.25560109,20.5897835,20.6416306,22.36783759,23.87670874,23.69830329
    ,21.87259947,21.88320604,20.87894562,21.2466667,21.9447628,23.09147473
    ,21.82083431,21.05993507,20.93759121,21.69594729,20.47243878,20.49583348
    ,20.97216515,21.13687267,20.37621324,20.39545445,20.56346469,20.97859093
    ,20.7617895,20.61404389,20.83411507,21.67015327,20.26692053,20.73565585
    ,21.50953693,21.52825277,20.56600389,20.49487918,22.18119889,21.859552
    ,29.97108162,30.87444219,23.59556067,23.41996165,20.75425432,21.33043233
    ,24.52715862,25.26966237,24.70216571,23.67265365,23.59887237,22.88520541
    ,20.94108972,20.80628195,21.07597654,21.23081558,20.46675316,20.30781705
    ,20.458681,21.32364851,21.29816427,20.52543665,21.25063311,21.52669399
    ,20.60377589,20.34095207,21.19083393,21.46681395,20.26743896,20.25815437
    ,21.10274806,22.34604985,24.48058235,31.06602869,33.63930876,30.8988198
    ,26.94234092,23.01841252,23.97404237,31.63970351,33.3977693,33.13070499
    ,33.04474004,33.04314407,26.26655427,22.31718387,21.59482428,21.34588941
    ,20.60286626,20.33940827,20.55266457,21.0438299,20.97188771,20.61649466
    ,21.07869462,21.87776647,20.69891295,20.92399614,21.51602845,21.34462093
    ,20.55316452,20.56102484,21.39296378,20.6959614,24.14660769,23.30298421
    ,32.29402139,33.04245764,30.09533844,30.3958272,25.59389795,25.62428987
    ,33.68440271,33.92637361,34.65390868,34.64496714,28.83543479,27.19166368
    ,21.68864556,21.61022017,20.46128824,20.64558246,20.87562453,21.76873593
    ,21.27276599,21.19998137,20.68885714,21.4690414,20.61251584,20.97093681
    ,21.38888129,21.61173832,20.84128207,20.79247293,21.22887983,22.22711574
    ,22.57301308,22.05946872,22.00414589,26.44410985,30.3627799,32.67872787
    ,33.41973316,31.50313647,32.26059802,34.21848697,34.70255311,35.01381025
    ,34.00432017,33.51961463,28.56074316,23.60009917,21.11929735,20.70014381
    ,20.78624248,21.74525027,20.90806488,21.33796458,21.12400748,21.60648308
    ,20.46779265,20.42044795,21.48269856,21.69571951,20.69568425,20.8920318
    ,23.00493718,23.76395526,25.92954279,26.81950299,23.31929132,22.66808881
    ,27.43010329,27.44820523,33.2692041,33.86984873,33.94830862,34.23015731
    ,34.71556689,34.51521094,33.96517504,34.34642758,30.80556337,28.43567251
    ,21.37139071,20.79438273,20.90225746,21.80695656,20.972572,21.43510398
    ,21.45636225,21.41845597,20.47336163,20.60353546,21.20357007,21.49231061
    ,20.91568269,21.40272926,21.83824377,27.68290406,30.96424229,32.58287516
    ,33.42110341,32.22432418,31.08449371,29.36402298,30.37244659,34.48980854
    ,34.61836108,34.08006513,34.17559865,34.6768961,33.95457237,34.3039183
    ,34.64507627,32.51221669,23.66704116,21.80529728,20.87968697,22.46066566
    ,21.26072106,21.42241104,21.15768421,21.23657534,20.0984572,20.70977892
    ,21.50915124,21.36690175,20.76863989,20.5158836,22.27776177,21.7968045
    ,27.29620498,26.99151918,32.45699071,32.73290085,33.10167532,33.36048669
    ,34.49166706,34.33879071,34.30602097,34.09543444,34.35167046,34.36029186
    ,34.10671126,34.47600127,34.45823392,34.51682785,25.54693808,24.32686488
    ,21.79029529,22.30938862,20.87809879,21.29255321,21.47731777,21.33238627
    ,20.94948789,20.65773374,21.47396006,21.58535563,20.70499317,20.73473478
    ,20.75785124,21.37131829,20.76271764,21.53622083,21.41990495,24.05566797
    ,25.42750093,27.56432569,30.48489547,33.05983971,33.69279373,33.92593771
    ,34.15383206,34.09390165,33.39684782,34.11481782,34.1216473,34.29542484
    ,31.41687853,27.03673468,23.12498594,22.35618881,21.30023937,20.81655527
    ,21.52845929,22.16670911,20.34348374,20.54074751,21.1416411,21.04833741
    ,20.74510218,20.43202204,20.8316154,20.68039152,20.99006628,21.06998397
    ,21.65217277,21.30508393,21.69634051,21.46446921,26.46824849,27.14577319
    ,32.47484271,33.33211657,34.01008891,34.42779707,33.07014921,33.2009262
    ,33.62825013,33.6410973,29.31714716,28.15878215,22.58289713,22.60922198
    ,21.1261429,21.1043388,21.37178519,21.74403705,20.76801909,20.58522293
    ,20.87812445,21.16939494,20.21451845,20.28362267,20.60186727,21.00309577
    ,20.98022865,20.77411099,20.99237835,21.01021543,20.83713371,20.67931814
    ,20.96990694,21.66351762,22.88127795,27.75615095,32.03486664,33.20594865
    ,32.74696792,32.61610193,32.99507139,33.65631032,30.93017286,27.38414836
    ,23.57573475,22.34738781,21.04816342,20.98317387,21.39136606,21.87223041
    ,20.15708296,20.47578624,20.74875875,21.02903551,20.23941331,20.36881275
    ,20.86653529,20.67265303,20.48512905,20.67308741,20.86339017,21.42214587
    ,20.33497973,20.92258211,21.03581896,21.18354766,21.69857076,21.92528222
    ,27.65766023,28.51597675,31.61664182,32.01994505,32.85044164,33.00129454
    ,27.92456646,27.43887901,23.42097076,22.19507748,21.07661544,21.05360142
    ,21.21385118,21.66955008,20.71183588,20.53878168,20.53386927,20.99850427
    ,20.49942501,20.37865981,20.65665095,21.0670327,20.35452232,20.36963391
    ,20.91128085,20.76706452,20.69571844,20.35979105,20.50196581,21.19770834
    ,20.96844663,20.72349217,21.31715218,23.15671752,27.13682693,28.32286291
    ,28.43542437,27.56259368,26.47439175,25.94626362,22.52198829,22.14701202
    ,21.05977916,21.37189326,21.15471154,22.13329123,20.32858851,20.18946265
    ,20.81291801,20.86633364,19.92321142,20.05093051,20.88166503,20.34737465
    ,20.58217003,20.43961371,20.40720218,21.01479111,20.35183081,20.77707741
    ,21.26547316,21.41762806,20.44894969,20.952121,21.36574675,21.95505834
    ,27.32278762,27.36495552,27.23476605,27.60487109,26.12189437,25.82537882
    ,22.1513083,22.38920098,21.07138426,21.42219804,21.44485018,21.93563874
    ,20.14129574,20.08287625,20.73919768,20.97442684,20.80141743,20.29130478
    ,20.52902134,21.40524061,20.68087176,20.62489137,20.80290179,21.02948393
    ,20.5826662,20.51119416,20.70864291,21.16794803,20.41779788,20.65277919
    ,21.19149525,21.98905327,25.21072621,26.47055646,27.2070287,26.88096078
    ,25.5536559,24.61389623,22.19736139,22.03134006,20.67687936,20.99215757
    ,21.74627645,22.21254399,20.40589923,20.84730873,20.58415448,20.82016251
    ,20.21387474,20.37801557,20.59023027,20.88187179,19.92998347,20.50430376
    ,20.86035662,20.87992876,20.40648316,20.58363551,20.93449871,21.02237871
    ,20.60127115,20.707175,21.03963251,21.67240004,25.59495362,25.65182327
    ,26.71383983,26.74508695,25.38714584,24.67496432,22.02504215,22.27509167
    ,20.89467111,21.27747808,21.7999455,21.73683263,20.11752465,20.24658319
    ,20.4723799,20.99089072,20.09285198,20.14993818,20.62331614,20.88323523
    ,20.66357021,20.11888069,20.69870486,21.51335862,20.32770993,20.63663864
    ,20.75360385,21.21370409,20.67827679,20.61694844,22.96373674,25.7778358
    ,27.20169086,27.02404367,26.32213828,26.15127043,24.92651453,23.56566792
    ,21.80124795,22.32258156,21.35427663,21.03895267,20.97702598,22.32130159
    ,19.92094085,20.32342864,20.9593056,21.25347035,19.68788701,20.64101482
    ,20.68176456,20.72530699,20.47350245,20.55955452,20.74938914,20.78753615
    ,20.53653225,20.7153601,20.78815765,21.43506667,21.26624516,21.80467176
    ,25.2540122,26.74475765,27.77147458,27.81114809,26.75188383,27.16516008
    ,25.35240376,23.21875886,22.06774032,21.90758627,21.36163937,21.31780266
    ,21.54822504,21.83164603,20.21599191,20.20031428,20.98623202,21.29628446
    ,20.22655179,20.47506613,20.60872126,21.06987991,20.38613874,20.47201104
    ,21.44132034,21.2484291,21.59485602,22.60246328,23.8451532,24.64543951
    ,24.44951917,24.82439631,27.07211638,27.84770476,27.62215849,27.25610084
    ,26.72312532,27.15952647,24.49419214,22.78421328,21.71553111,22.12112423
    ,20.91230738,21.32302847,21.59450723,22.43974862,20.29994274,20.5752484
    ,21.07853102,20.92442348,20.27025414,20.1534742,21.32955562,20.95249769
    ,20.22697162,20.78774126,22.92105359,23.9107974,23.766792,23.83938633
    ,24.7090246,24.73737767,24.89258382,24.93143797,26.9759383,27.9438507
    ,27.3166287,27.74704254,26.82226935,26.85730426,23.71121239,22.67666351
    ,22.03788255,21.7285182,20.67982355,21.18142197,21.41179374,21.9731959]
    return render_template('streaming.html', temperature_data=temperature_data)
    

@app.route('/video_feed')
def video_feed():
    return Response(generate_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

if __name__ == "__main__":
    app.run(debug=True)
